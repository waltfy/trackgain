<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
    <title>TRACKGA.IN</title>
    <link rel='stylesheet' href='css/style.css'>
    <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Montserrat'>
    <link rel='stylesheet' href="fonts/font-awesome/css/font-awesome.css">
    <link rel='stylesheet' href="js/vendors/select2/select2.css">
  </head>
  <body>
    <script src='js/libs.js'></script>
    <script src='js/app.js'></script>
    <script src='js/templates.js'></script>
    <script src='js/vendors/select2/select2.js'></script>
    <script src='http://localhost:35729/livereload.js'></script>
    <script> 
      $(document).ready(function () {
        var graph = new Rickshaw.Graph({
            element: document.querySelector("#main_graph"), 
            height: 160,
            renderer: 'area',
            series: [{
                color: '#5f9ad9',
                data: [ { x: 1375634145, y: 50 },
                        { x: 1376600965, y: 20 },
                        { x: 1377621344, y: 90 }],
                name: 'Weight'
            }]
        });

        var hoverDetail = new Rickshaw.Graph.HoverDetail( {
          graph: graph,
          xFormatter: function(x) { 
            var date = new Date(x * 1000);
            var month = date.getUTCMonth();
            var day = date.getUTCDate();
            var year = date.getUTCFullYear();

            newdate = day + "/" + month + "/" + year;

            return newdate; 
          },
          yFormatter: function(y) {
              return y + 'kg';
          }
        } );

        var xAxis = new Rickshaw.Graph.Axis.Time({
          graph: graph
        });

        xAxis.render();

        graph.render();

        var timeout = false;
        var delta = 200;

        window.onresize = function (ev) {
          rtime = new Date();
          if (timeout === false) {
            timeout = true;
            setTimeout(resizeend, delta);
          }
        }

        function resizeend() {
          if (new Date() - rtime < delta) {
            setTimeout(resizeend, delta);
          } else {
            graph.configure({ width: $(".graph_container").width(), height: 160});
            graph.render();
            timeout = false;
          }               
        }
         
     });  
    </script>
  </body>
</html>