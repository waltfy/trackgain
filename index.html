<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>
    <title>TRACKGA.IN</title>
    <link rel='stylesheet' href='assets/css/style.css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
    <link href="bower_components/font-awesome/css/font-awesome.css" rel="stylesheet">
  </head>
  <body>
    <script type='text/x-handlebars'>
      <div class='trackgain'>
        <header>
          <h1>{{App.name}}</h1>
          <span class='avatar'/>
        </header>
        <div class='options'>
          {{view Ember.Select
            contentBinding = 'App.availablePlots'
            selectionBinding = 'App.availablePlots[0]'}}
        </div>
        <div class='graph' id='main_graph'></div>
        <section class='app'>
            <header>
              <nav>
                <ul>
                  {{#linkTo index}}<li><h2>Track</h2></li>{{/linkTo}}
                  {{#linkTo measure}}<li><h2>Measure</h2></li>{{/linkTo}}
                </ul>
              </nav>
            </header>
            <div class='content'>
              {{outlet}}
            </div>
        </section>
      </div>
      <footer>
        <small>2013 &copy; TRACKGA.IN</small>
      </footer>
    </script>
    <script type='text/x-handlebars' data-template-name='index'>
      <button class='btn--success invert'><i class='icon-plus'></i> Add Exercise</button>
      <table>
        <thead>
          <tr>
            <th>Exercise</th>
            <th class='center'>Weight kg</th>
            <th class='center'>Repetitions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Bench Press</td>
            <td class='center'>80</td>
            <td class='center'>10</td>
          </tr>
          <tr>
            <td>Squats</td>
            <td class='center'>80</td>
            <td class='center'>10</td>
          </tr>
        </tbody>
    </table>  
    </script>

    <script type='text/x-handlebars' data-template-name='measure'>
      <p>LOLOLOL</p> 
    </script>
    <script src='assets/js/libs.js'></script>
    <script src='assets/js/app.js'></script>
    <script src='http://localhost:35729/livereload.js'></script>
    <script> 
      $(document).ready(function () {
        var graph = new Rickshaw.Graph( {
            element: document.querySelector("#main_graph"), 
            height: 160, 
            series: [{
                color: '#5f9ad9',
                data: [ 
                    { x: 0, y: 24 }, 
                    { x: 1, y: 49 }, 
                    { x: 2, y: 20 }, 
                    { x: 3, y: 33 }, 
                    { x: 4, y: 15 } ]
            }]
        });

        graph.render();

        var timeout = false;
        var delta = 200;

        window.onresize = function (ev) {
          rtime = new Date();
          if (timeout === false) {
            timeout = true;
            setTimeout(resizeend, delta);
          }
        }

        function resizeend() {
          if (new Date() - rtime < delta) {
            setTimeout(resizeend, delta);
          } else {
            graph.render();
            timeout = false;
          }               
        }
         
     });  
    </script>
  </body>
</html>